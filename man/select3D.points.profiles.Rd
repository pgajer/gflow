% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/select_pts.R
\name{select3D.points.profiles}
\alias{select3D.points.profiles}
\title{Select 3D Points and Show Profiles}
\usage{
select3D.points.profiles(
  X,
  Z = NULL,
  n.comp = 5,
  show.profiles = FALSE,
  use.pts = FALSE,
  color = "red",
  alpha = 0.3,
  size = 0.1,
  radius = 0.1,
  allow_headless = FALSE
)
}
\arguments{
\item{X}{Numeric matrix with 3 columns representing 3D coordinates.}

\item{Z}{Optional data matrix with the same number of rows as \code{X} for computing profiles.}

\item{n.comp}{Number of top components to include in profiles (default: 5).}

\item{show.profiles}{Logical; whether to display profiles during selection.}

\item{use.pts}{Logical; if TRUE, use points for highlighting; otherwise use spheres.}

\item{color}{Color for highlighting selected points.}

\item{alpha}{Transparency for highlighted spheres (0–1).}

\item{size}{Size for highlighted points (when \code{use.pts = TRUE}).}

\item{radius}{Radius for highlighted spheres (when \code{use.pts = FALSE}).}

\item{allow_headless}{Logical; if TRUE, bypasses the headless/null-device check
(selection still won't work without a real OpenGL device). Default FALSE.}
}
\value{
A list with:
\item{idx}{Integer vector of selected row indices in \code{X}.}
\item{prof}{1×k matrix of the mean profile over selected rows (top \code{n.comp} features),
or \code{NA} if \code{Z} is not provided or nothing is selected.}
}
\description{
Interactively select points in 3D space and optionally compute their profiles
from associated data.
}
\details{
This function is \strong{interactive} and requires a real rgl OpenGL window. On CRAN/rhub
or other headless environments (where \code{options(rgl.useNULL)=TRUE}), interactive
selection is unavailable and the function stops with an informative error.
}
\examples{
\dontrun{
if (interactive() && requireNamespace("rgl", quietly = TRUE)) {
  set.seed(123)
  n <- 100
  X <- matrix(rnorm(n * 3), ncol = 3)
  Z <- matrix(rpois(n * 10, lambda = 5), ncol = 10)
  colnames(Z) <- paste0("Feature", 1:10)

  rgl::open3d()
  rgl::plot3d(X, col = "blue")

  sel <- select3D.points.profiles(X, Z, show.profiles = TRUE)
  rgl::points3d(X[sel$idx, , drop = FALSE], col = "red", size = 10)
}
}
}
